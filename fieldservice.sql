--
-- PostgreSQL database dump
--

\restrict uwVoTuQ1zeDFlM5DhJ8ZnWyar7wi5kIMokOVUsC6GrqpazFQxcYrmJKuMAQHzjh

-- Dumped from database version 18.1
-- Dumped by pg_dump version 18.1

-- Started on 2025-11-24 16:50:49

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 220 (class 1259 OID 16390)
-- Name: companies; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.companies (
    id bigint NOT NULL,
    address character varying(255),
    email character varying(255),
    name character varying(255),
    phone_number character varying(255),
    settings_json character varying(4000)
);


ALTER TABLE public.companies OWNER TO postgres;

--
-- TOC entry 219 (class 1259 OID 16389)
-- Name: companies_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.companies ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.companies_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 231 (class 1259 OID 16448)
-- Name: daily_job_reports; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.daily_job_reports (
    id bigint NOT NULL,
    cancelled_jobs bigint,
    company_id bigint NOT NULL,
    completed_jobs bigint,
    date date NOT NULL,
    in_progress_jobs bigint,
    new_jobs bigint,
    total_jobs bigint,
    total_material_cost double precision,
    total_work_time_minutes bigint
);


ALTER TABLE public.daily_job_reports OWNER TO postgres;

--
-- TOC entry 230 (class 1259 OID 16447)
-- Name: daily_job_reports_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.daily_job_reports ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.daily_job_reports_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 229 (class 1259 OID 16439)
-- Name: job_materials; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.job_materials (
    id bigint NOT NULL,
    created_at timestamp(6) without time zone,
    job_id bigint,
    name character varying(255),
    quantity double precision,
    technician_id bigint,
    unit character varying(255),
    unit_price numeric(38,2)
);


ALTER TABLE public.job_materials OWNER TO postgres;

--
-- TOC entry 228 (class 1259 OID 16438)
-- Name: job_materials_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.job_materials ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.job_materials_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 227 (class 1259 OID 16430)
-- Name: job_photos; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.job_photos (
    id bigint NOT NULL,
    file_name character varying(255),
    file_path character varying(255),
    job_id bigint,
    technician_id bigint
);


ALTER TABLE public.job_photos OWNER TO postgres;

--
-- TOC entry 226 (class 1259 OID 16429)
-- Name: job_photos_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.job_photos ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.job_photos_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 222 (class 1259 OID 16399)
-- Name: jobs; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.jobs (
    id bigint NOT NULL,
    address character varying(255),
    assigned_technician_id bigint,
    company_id bigint,
    created_by_user_id bigint,
    description character varying(2000),
    latitude double precision,
    longitude double precision,
    priority character varying(255),
    scheduled_end timestamp(6) without time zone,
    scheduled_start timestamp(6) without time zone,
    status character varying(255),
    title character varying(255),
    work_completed_at timestamp(6) without time zone,
    work_started_at timestamp(6) without time zone,
    CONSTRAINT jobs_status_check CHECK (((status)::text = ANY ((ARRAY['NEW'::character varying, 'ASSIGNED'::character varying, 'IN_PROGRESS'::character varying, 'ON_HOLD'::character varying, 'COMPLETED'::character varying, 'CANCELLED'::character varying])::text[])))
);


ALTER TABLE public.jobs OWNER TO postgres;

--
-- TOC entry 221 (class 1259 OID 16398)
-- Name: jobs_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.jobs ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.jobs_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 223 (class 1259 OID 16408)
-- Name: user_roles; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.user_roles (
    user_id bigint NOT NULL,
    role character varying(255),
    CONSTRAINT user_roles_role_check CHECK (((role)::text = ANY ((ARRAY['ADMIN'::character varying, 'COMPANY_ADMIN'::character varying, 'DISPATCHER'::character varying, 'TECHNICIAN'::character varying])::text[])))
);


ALTER TABLE public.user_roles OWNER TO postgres;

--
-- TOC entry 225 (class 1259 OID 16414)
-- Name: users; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.users (
    id bigint NOT NULL,
    company_id bigint,
    email character varying(255),
    name character varying(255),
    password_hash character varying(255)
);


ALTER TABLE public.users OWNER TO postgres;

--
-- TOC entry 224 (class 1259 OID 16413)
-- Name: users_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.users ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.users_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 5005 (class 0 OID 16390)
-- Dependencies: 220
-- Data for Name: companies; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.companies (id, address, email, name, phone_number, settings_json) FROM stdin;
1	Tripoli	company@test.com	Test Company	00000000	\N
\.


--
-- TOC entry 5016 (class 0 OID 16448)
-- Dependencies: 231
-- Data for Name: daily_job_reports; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.daily_job_reports (id, cancelled_jobs, company_id, completed_jobs, date, in_progress_jobs, new_jobs, total_jobs, total_material_cost, total_work_time_minutes) FROM stdin;
\.


--
-- TOC entry 5014 (class 0 OID 16439)
-- Dependencies: 229
-- Data for Name: job_materials; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.job_materials (id, created_at, job_id, name, quantity, technician_id, unit, unit_price) FROM stdin;
1	2025-11-22 17:12:26.778626	1	Filter	2	5	pcs	5.50
2	2025-11-24 11:04:23.306123	7	as	1	5	pc1s	1.00
3	2025-11-24 13:11:19.998301	1	jbd	12	5	pcs12	12.00
4	2025-11-24 14:22:14.564741	5	moham	2	5	2pcs	1.00
5	2025-11-24 14:57:06.109771	8	gu	4	5	pcs6	6.00
6	2025-11-24 16:16:22.159794	14	coffe	2	5	pcs1	2.00
\.


--
-- TOC entry 5012 (class 0 OID 16430)
-- Dependencies: 227
-- Data for Name: job_photos; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.job_photos (id, file_name, file_path, job_id, technician_id) FROM stdin;
\.


--
-- TOC entry 5007 (class 0 OID 16399)
-- Dependencies: 222
-- Data for Name: jobs; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.jobs (id, address, assigned_technician_id, company_id, created_by_user_id, description, latitude, longitude, priority, scheduled_end, scheduled_start, status, title, work_completed_at, work_started_at) FROM stdin;
3	Tripoli, Maarad Street, Building 10	5	1	1	Customer reports weak cooling. Check filters, gas, and thermostat.	34.4412	35.8345	HIGH	2025-11-22 12:00:00	2025-11-22 10:00:00	COMPLETED	AC Maintenance - 3rd Floor	2025-11-24 14:14:24.282285	\N
1	Tripoli, Lebanon	5	1	2	Fix AC cooling problem.	34.4381	35.8497	HIGH	2025-11-22 00:41:19.906041	2025-11-21 22:41:19.906041	COMPLETED	Air Conditioner Maintenance	2025-11-24 14:19:12.698654	2025-11-23 00:34:30.399582
5	vjn	5	1	1	l	\N	\N	MEDIUM	\N	\N	COMPLETED	nm	2025-11-24 14:22:19.516044	2025-11-24 14:22:16.539756
8	as	5	1	1	gs	\N	\N	MEDIUM	\N	\N	COMPLETED	build a page	2025-11-24 14:56:49.553305	2025-11-24 14:56:41.322934
6	wq	5	1	1	wq	\N	\N	MEDIUM	\N	\N	ASSIGNED	qw	\N	\N
13	jagsj	5	1	1	flutter page	\N	\N	MEDIUM	2025-11-25 16:23:00	2025-11-24 16:23:00	ASSIGNED	build a flutter page	\N	\N
14	make a coffee	5	1	1	make a coffee	\N	\N	MEDIUM	\N	\N	COMPLETED	make a coffe	2025-11-24 16:16:05.012718	2025-11-24 16:16:00.68039
2	Tripoli, Maarad Street, Building 10	\N	1	1	Customer reports weak cooling. Check filters, gas, and thermostat.	34.4412	35.8345	HIGH	2025-11-22 12:00:00	2025-11-22 10:00:00	ASSIGNED	AC Maintenance - 3rd Floor	\N	\N
9	gt	\N	1	1	g	\N	\N	MEDIUM	\N	\N	NEW	vhvn	\N	\N
10	as	\N	1	1	ham	\N	\N	MEDIUM	\N	\N	NEW	ham	\N	\N
11	hello	\N	1	1	hello	\N	\N	MEDIUM	\N	\N	NEW	hello	\N	\N
7	kp;m	\N	1	1	kplm	\N	\N	MEDIUM	\N	\N	COMPLETED	lm	2025-11-24 10:49:33.414582	2025-11-24 10:49:16.394758
12	sa	\N	1	1	hiaskb	\N	\N	MEDIUM	\N	\N	NEW	build a page	\N	\N
4	Tripoli, Maarad Street, Building 10	\N	1	1	Customer reports weak cooling. Check filters, gas, and thermostat.	34.4412	35.8345	HIGH	2025-11-22 12:00:00	2025-11-22 10:00:00	ASSIGNED	AC Maintenance - 3rd Floor	\N	\N
\.


--
-- TOC entry 5008 (class 0 OID 16408)
-- Dependencies: 223
-- Data for Name: user_roles; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.user_roles (user_id, role) FROM stdin;
1	TECHNICIAN
1	COMPANY_ADMIN
2	TECHNICIAN
5	TECHNICIAN
\.


--
-- TOC entry 5010 (class 0 OID 16414)
-- Dependencies: 225
-- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.users (id, company_id, email, name, password_hash) FROM stdin;
1	1	tech@example.com	Tech One	$2a$10$PMRAwFuV6i1vAAna7TEkae4BIfDk/iXL9LjqljR2sdpiKZFoNJ91i
2	1	company1@test.com	Company Admin	$2a$10$PMRAwFuV6i1vAAna7TEkae4BIfDk/iXL9LjqljR2sdpiKZFoNJ91i
5	1	tech1@test.com	Technician One	$2a$10$PMRAwFuV6i1vAAna7TEkae4BIfDk/iXL9LjqljR2sdpiKZFoNJ91i
\.


--
-- TOC entry 5022 (class 0 OID 0)
-- Dependencies: 219
-- Name: companies_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.companies_id_seq', 1, true);


--
-- TOC entry 5023 (class 0 OID 0)
-- Dependencies: 230
-- Name: daily_job_reports_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.daily_job_reports_id_seq', 1, false);


--
-- TOC entry 5024 (class 0 OID 0)
-- Dependencies: 228
-- Name: job_materials_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.job_materials_id_seq', 6, true);


--
-- TOC entry 5025 (class 0 OID 0)
-- Dependencies: 226
-- Name: job_photos_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.job_photos_id_seq', 1, false);


--
-- TOC entry 5026 (class 0 OID 0)
-- Dependencies: 221
-- Name: jobs_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.jobs_id_seq', 14, true);


--
-- TOC entry 5027 (class 0 OID 0)
-- Dependencies: 224
-- Name: users_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.users_id_seq', 5, true);


--
-- TOC entry 4841 (class 2606 OID 16397)
-- Name: companies companies_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.companies
    ADD CONSTRAINT companies_pkey PRIMARY KEY (id);


--
-- TOC entry 4853 (class 2606 OID 16455)
-- Name: daily_job_reports daily_job_reports_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.daily_job_reports
    ADD CONSTRAINT daily_job_reports_pkey PRIMARY KEY (id);


--
-- TOC entry 4851 (class 2606 OID 16446)
-- Name: job_materials job_materials_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.job_materials
    ADD CONSTRAINT job_materials_pkey PRIMARY KEY (id);


--
-- TOC entry 4849 (class 2606 OID 16437)
-- Name: job_photos job_photos_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.job_photos
    ADD CONSTRAINT job_photos_pkey PRIMARY KEY (id);


--
-- TOC entry 4843 (class 2606 OID 16407)
-- Name: jobs jobs_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.jobs
    ADD CONSTRAINT jobs_pkey PRIMARY KEY (id);


--
-- TOC entry 4845 (class 2606 OID 16423)
-- Name: users uk6dotkott2kjsp8vw4d0m25fb7; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT uk6dotkott2kjsp8vw4d0m25fb7 UNIQUE (email);


--
-- TOC entry 4855 (class 2606 OID 16457)
-- Name: daily_job_reports ukpfw8529els0wos73dmppxp4a5; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.daily_job_reports
    ADD CONSTRAINT ukpfw8529els0wos73dmppxp4a5 UNIQUE (company_id, date);


--
-- TOC entry 4847 (class 2606 OID 16421)
-- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_pkey PRIMARY KEY (id);


--
-- TOC entry 4856 (class 2606 OID 16424)
-- Name: user_roles fkhfh9dx7w3ubf1co1vdev94g3f; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.user_roles
    ADD CONSTRAINT fkhfh9dx7w3ubf1co1vdev94g3f FOREIGN KEY (user_id) REFERENCES public.users(id);


-- Completed on 2025-11-24 16:50:49

--
-- PostgreSQL database dump complete
--

\unrestrict uwVoTuQ1zeDFlM5DhJ8ZnWyar7wi5kIMokOVUsC6GrqpazFQxcYrmJKuMAQHzjh

